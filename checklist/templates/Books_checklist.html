{% extends "base_generic.html" %}
{% load static %}
{% load tags %}

{% block details %}
    <link rel="stylesheet" href="{% static 'Books.css' %}" media="screen">
{% endblock %}

{% block content %}
<!--
  <ul>
    {% for choice in choice_list %}
      <li>
        <a href="{{ choice.books.get_absolute_url }}"></a>{{ choice.books.title.all|join:", " }}</a> 
      </li>
    {% endfor %}
  </ul>



  {% if book_list %}
  <ul>
      {% for book in book_list %}
        <li>
            <form method="post" action="{% url 'login' %}">
                {{ book.title }}
            </form>
        </li>
      {% endfor %}
    </ul>
{% else %}
  <p>There are no books in the library.</p>
{% endif %} 
-->



    <section class="u-align-center u-clearfix u-grey-10 u-section-1" src="" id="sec-889b">
        <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
            <h1 class="u-text u-title u-text-1">Books</h1>
            <p class="u-large-text u-text u-text-variant u-text-2">
                Read in sprints.<br>Have your next book on stand-by.
            </p>
            <a href="#checklist" class="u-black u-btn u-btn-round u-button-style u-radius-5 u-btn-1">START</a>
        </div>
    </section>
    <div id="checklist"></div>

    <section class="u-align-left u-clearfix u-section-2" id="carousel_4e2f">
        <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <h5 class="u-text u-text-1">mark WHAT YOU'VE already READ</h5>

<!-- Trying-->
        {% if book_list %}
            <div class="u-expanded-width u-list u-repeater u-list-1">
                {% for book in book_list %}
                    <div class="u-align-left u-container-style u-list-item u-repeater-item">
                        {% is_read book user as is_book_read_by_user %}
                        <div class="u-container-layout u-similar-container u-container-layout-1 book-click chcklist-el" data-read={{ is_book_read_by_user }} data-book={{ book.id }} style="cursor:pointer;">
                            <span class="u-icon u-text-black u-icon-1 book-read" {% if not is_book_read_by_user %} style="display:none" {% endif %}>
                                <img src="{% static 'images/checkbox.svg' %}" class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 512.001 512.001" style="">
                            </span>
                            <span class="u-icon u-icon-1 book-unread" {% if is_book_read_by_user %} style="display:none" {% endif %}>
                                <img src="{% static 'images/empty-checkbox.svg' %}" class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 512.001 512.001" style="">
                            </span>
                            <h5 class="u-text u-text-4">{{ book.title }}<br>by {{book.author.all|join:", "}}</h5>
                        </div>
                    </div>
                
                {% endfor %}
            </div>
        {% else %}
            <p>There are no books in the library.</p>
        {% endif %} 



<!-- Trying-->



    </section>

    <script>
        $(".book-click").click(function(){
            let is_read = $(this).data("read") === "True";
            let is_read_marker = $(this).find(".book-read");
            let is_unread_marker = $(this).find(".book-unread");
            if (is_read) {
                $(this).data("read", "False");
                is_read_marker.hide();
                is_unread_marker.show();
            }
            else {
                $(this).data("read", "True");
                is_read_marker.show();
                is_unread_marker.hide();
            }            
        });
    </script>

{% endblock %}
